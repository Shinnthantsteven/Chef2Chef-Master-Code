<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1200, initial-scale=0.1">
<title>Chef2Chef | Master Code</title>

<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<style>
:root {
    --brand: #10b981;
    --bg-color: #020617;
    --text: #f1f5f9;
    --header-bg: #010409;
    --glass-edge: rgba(255,255,255,0.15);
    --danger: #ef4444;
    --portal-bg: rgba(15,23,42,0.75);
    --input-bg: rgba(0,0,0,0.45);
    --hl: #fbbf24;
}

[data-theme="light"] {
    --bg-color: #f8fafc;
    --text: #0f172a;
    --header-bg: #ffffff;
    --glass-edge: rgba(0,0,0,0.12);
    --portal-bg: rgba(255,255,255,0.75);
    --input-bg: rgba(255,255,255,0.8);
}

html,body{
    margin:0;
    height:100vh;
    font-family:'Plus Jakarta Sans',sans-serif;
    background:var(--bg-color);
    color:var(--text);
    overflow:hidden;
}

mark{
    background:var(--hl);
    color:#000;
    border-radius:3px;
    padding:0 3px;
}

/* ================= LOGIN (APPLE LIQUID) ================= */
#loginScreen{
    position:fixed;
    inset:0;
    background:
      radial-gradient(1200px 600px at top, rgba(16,185,129,.15), transparent),
      var(--bg-color);
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:2000;
}

.login-card{
    width:420px;
    padding:50px;
    border-radius:36px;
    background:rgba(255,255,255,0.08);
    backdrop-filter: blur(28px) saturate(160%);
    border:1px solid var(--glass-edge);
    text-align:center;
    box-shadow:0 30px 80px rgba(0,0,0,.4);
}

.knife-box{
    font-size:80px;
    margin-bottom:20px;
    filter:drop-shadow(0 0 25px var(--brand));
    transition:.5s;
}
.knife-slice{transform:scale(15) translateX(120px);opacity:0;}

.login-card h1{
    font-size:28px;
    font-weight:800;
    margin-bottom:25px;
}

.login-card input{
    width:100%;
    padding:18px;
    border-radius:18px;
    border:1px solid var(--glass-edge);
    background:rgba(0,0,0,.35);
    color:var(--text);
    font-size:20px;
    text-align:center;
    outline:none;
}

.unlock-btn{
    width:100%;
    margin-top:20px;
    padding:18px;
    border-radius:18px;
    border:none;
    background:linear-gradient(135deg,#10b981,#34d399);
    color:#fff;
    font-weight:800;
    cursor:pointer;
}

/* ================= TOP NAV ================= */
.top-nav{
    padding:15px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:var(--header-bg);
    border-bottom:1px solid var(--glass-edge);
}

.logo-container{
    display:flex;
    align-items:center;
    gap:15px;
    text-decoration:none;
    color:inherit;
}
.logo-img{height:45px;width:45px;}
.logo-text{font-size:26px;font-weight:800;}

.theme-btn{
    background:none;
    border:none;
    font-size:26px;
    cursor:pointer;
}

/* ================= TABLE ================= */
.content-container{
    height:calc(100vh - 80px);
    overflow-y:auto;
    padding:0 40px 180px;
}

table{width:100%;border-collapse:collapse;table-layout:fixed;}
th{
    position:sticky;
    top:0;
    background:var(--bg-color);
    padding:25px 15px;
    font-size:11px;
    text-transform:uppercase;
    border-bottom:2px solid var(--brand);
}

td{
    padding:22px 15px;
    border-bottom:1px solid var(--glass-edge);
    font-size:14px;
    cursor:pointer;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
}

.desc-cell{white-space:normal;font-weight:800;}

.brand-pill{
    background:rgba(59,130,246,.15);
    color:#3b82f6;
    padding:6px 12px;
    border-radius:8px;
    font-weight:700;
    font-size:12px;
}
.origin-pill{
    background:rgba(16,185,129,.15);
    color:var(--brand);
    padding:6px 12px;
    border-radius:8px;
    font-weight:700;
    font-size:12px;
    margin-left:5px;
}

/* ================= SEARCH BAR (APPLE LIQUID) ================= */
.portal-bar{
    position:fixed;
    bottom:30px;
    left:50%;
    transform:translateX(-50%);
    width:85%;
    max-width:1100px;
    padding:18px 40px;
    border-radius:999px;
    background:rgba(255,255,255,0.12);
    backdrop-filter: blur(30px) saturate(180%);
    border:1px solid var(--glass-edge);
    display:flex;
    gap:20px;
    align-items:center;
    z-index:1000;
    box-shadow:0 25px 70px rgba(0,0,0,.35);
}

#searchIn{
    flex:1;
    background:transparent;
    border:none;
    color:var(--text);
    font-size:24px;
    font-weight:700;
    outline:none;
}
#searchIn::placeholder{opacity:.35;}

#toast{
    position:fixed;
    bottom:120px;
    left:50%;
    transform:translateX(-50%);
    background:var(--brand);
    color:#fff;
    padding:10px 30px;
    border-radius:50px;
    font-weight:800;
    display:none;
}
</style>
</head>

<body onload="document.getElementById('passIn').focus()">

<div id="loginScreen">
    <div>
        <div id="knife" class="knife-box">üî™</div>
        <div class="login-card">
            <h1>CHEF2CHEF ITEM CODE</h1>
            <input id="passIn" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            <button class="unlock-btn" onclick="checkAuth()">UNLOCK</button>
            <p id="err" style="color:var(--danger);font-size:11px;font-weight:700;margin-top:15px;"></p>
        </div>
    </div>
</div>

<div id="toast">COPIED</div>

<nav class="top-nav">
    <a href="https://chef2chef.ae" target="_blank" class="logo-container">
        <img src="logo.png" class="logo-img">
        <div class="logo-text">CHEF2CHEF <span style="color:var(--brand)">MASTER</span></div>
    </a>
    <button class="theme-btn" onclick="toggleTheme()" id="navToggle">üåô</button>
</nav>

<div class="content-container">
<table>
<thead>
<tr>
<th>ID</th><th>Description</th><th>Cost</th><th>U/M</th>
<th>Packing</th><th>Supplier</th><th>Brand/Origin</th><th>Part No.</th>
</tr>
</thead>
<tbody id="list" onclick="handleQuickCopy(event)"></tbody>
</table>
</div>

<div class="portal-bar">
    <input type="file" id="fileIn" hidden onchange="manualUpload(event)">
    <button onclick="fileIn.click()">üìÅ</button>
    <input id="searchIn" placeholder="Search across all fields‚Ä¶">
    <button onclick="location.reload()" style="background:var(--danger);color:#fff;border:none;padding:12px 30px;border-radius:50px;font-weight:800;">EXIT</button>
</div>

<script>
let db=[],currentSearch="";

function toggleTheme(){
    const d=document.documentElement;
    const n=d.getAttribute("data-theme")==="light"?"dark":"light";
    d.setAttribute("data-theme",n);
    navToggle.textContent=n==="light"?"‚òÄÔ∏è":"üåô";
}

function checkAuth(){
    if(passIn.value==="C2C2026"){
        knife.classList.add("knife-slice");
        setTimeout(()=>{
            loginScreen.style.display="none";
            autoLoad();
        },400);
    }else err.textContent="DENIED";
}

async function autoLoad(){
    const r=await fetch("data.csv?v="+Date.now());
    processData(await r.text());
}

function manualUpload(e){
    const r=new FileReader();
    r.onload=x=>processData(x.target.result);
    r.readAsText(e.target.files[0]);
}

function processData(csv){
    const wb=XLSX.read(csv,{type:"string"});
    const raw=XLSX.utils.sheet_to_json(wb.Sheets[wb.SheetNames[0]],{defval:""});
    db=raw.map(r=>({
        id:String(r.Item||r["Item ID"]||""),
        desc:String(r.Description||""),
        cost:String(r.Cost||r.Price||""),
        um:String(r["U/M"]||""),
        pack:String(r["Case Packing"]||r["Case Pack"]||r.Packing||""),
        sup:String(r["Preferred Supplier"]||""),
        brand:String(r.Brand||""),
        origin:String(r.Origin||"UAE"),
        part:String(r["Manu. Part No."]||r["Part No."]||"")
    }));
    render(db);
}

function highlight(t){
    if(!currentSearch)return t;
    return t.replace(new RegExp(`(${currentSearch})`,"gi"),"<mark>$1</mark>");
}

searchIn.oninput=e=>{
    currentSearch=e.target.value.toLowerCase();
    render(db.filter(r=>(`${r.id} ${r.desc} ${r.pack} ${r.um} ${r.sup} ${r.brand} ${r.origin} ${r.part}`).toLowerCase().includes(currentSearch)));
};

function render(data){
    list.innerHTML=data.slice(0,150).map(r=>`
    <tr>
        <td>${highlight(r.id)}</td>
        <td class="desc-cell">${highlight(r.desc)}</td>
        <td style="color:var(--brand);font-weight:800;">${r.cost}</td>
        <td>${highlight(r.um)}</td>
        <td>${highlight(r.pack)}</td>
        <td>${highlight(r.sup)}</td>
        <td><span class="brand-pill">${highlight(r.brand)}</span>
            <span class="origin-pill">${highlight(r.origin)}</span></td>
        <td>${highlight(r.part)}</td>
    </tr>`).join("");
}

function handleQuickCopy(e){
    const td=e.target.closest("td");
    if(!td)return;
    navigator.clipboard.writeText(td.innerText);
    toast.style.display="block";
    setTimeout(()=>toast.style.display="none",600);
}
</script>
</body>
</html>
